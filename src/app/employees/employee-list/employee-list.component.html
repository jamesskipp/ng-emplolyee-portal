<!-- Employee table container -->
<div class="container">
  <div class="row">

    <!-- Main Table for employee records -->
    <table class="table table-hover">
      <thead id="employee-thead">
      <tr>
        <th></th>

        <!-- Table Column Heads - Links to /employees with updated sort queryParams -->
        <th><a
          [routerLink]="['/employees']"
          [queryParams]="{ sort: 'firstName', size: this.queryParams['size'], page: this.queryParams['page'] }"
          routerLinkActive="active-sort">First Name</a></th>
        <th><a
          [routerLink]="['/employees']"
          [queryParams]="{ sort: 'lastName', size: this.queryParams['size'], page: this.queryParams['page'] }"
          routerLinkActive="active-sort">Last Name</a></th>
        <th><a
          [routerLink]="['/employees']"
          [queryParams]="{ sort: 'salary', size: this.queryParams['size'], page: this.queryParams['page'] }"
          routerLinkActive="active-sort">Salary</a></th>
        <th><a
          [routerLink]="['/employees']"
          [queryParams]="{ sort: 'hireDate', size: this.queryParams['size'], page: this.queryParams['page'] }"
          routerLinkActive="active-sort">Date Hired</a></th>
      </tr>
      </thead>
      <tbody>

      <!-- Table Rows - Generated by ngFor iterating over the Employee Array -->
        <tr *ngFor="let employeeEl of employees; let i = index" [routerLink]="[employeeEl.id]">

          <!-- Row number is calculated by multiplying queryparam page by size and adding 1 -->
          <th scope="row">{{ i + (this.queryParams['page'] * this.queryParams['size']) + 1 }}</th>
          <td>{{ employeeEl.firstName }}</td>
          <td>{{ employeeEl.lastName }}</td>
          <td>{{ employeeEl.salary }}</td>

          <!-- Formatter function for the Date object with moment js -->
          <td>{{ formatDate(employeeEl.hireDate) }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Pagination container -->
<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <nav aria-label="Page navigation">
        <ul class="pagination pagination-md justify-content-center">
          <li class="page-item">

            <!-- Back Button - disabled if the page is 0 or less - subtracts 1 from the page -->
            <button class="page-link" aria-label="Previous"
               [disabled]="this.queryParams['page'] <= 0"
               [routerLink]="['/employees']"
               [queryParams]="{ sort: this.queryParams['sort'], size: this.queryParams['size'], page: +this.queryParams['page'] - 1 }">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </button>
          </li>

          <!-- Pages generated by creating an array of numbers 0 ... totalPages - Links to indivual pages -->
          <li
            *ngFor="let number of this.getPageArray()" class="page-item"
            [ngClass]="{'active' : this.queryParams['page'] == number}">
            <a
              class="page-link"
              [routerLink]="['/employees']"
              [queryParams]="{ sort: this.queryParams['sort'], size: this.queryParams['size'], page: number}"
              >{{ number + 1 }}</a></li>

          <!-- Forward Button - disabled if there are no more pages - adds 1 to the current page -->
          <li class="page-item">
            <button class="page-link" aria-label="Next"
                [disabled]="(totalPages - this.queryParams['page']) <= 1"
                [routerLink]="['/employees']"
                [queryParams]="{ sort: this.queryParams['sort'], size: this.queryParams['size'], page: +this.queryParams['page'] + 1 }">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
